{"version":3,"sources":["../../js/app.js"],"names":["require","SnippetPreview","defaultsDeep","isObject","isString","MissingArgument","isUndefined","isEmpty","forEach","debounce","throttle","Jed","SEOAssessor","ContentAssessor","CornerstoneSEOAssessor","CornerstoneContentAssessor","Researcher","AssessorPresenter","Pluggable","Paper","removeHtmlBlocks","inputDebounceDelay","defaults","callbacks","bindElementEvents","updateSnippetValues","saveScores","saveContentScore","updatedContentResults","updatedKeywordsResults","sampleText","baseUrl","snippetCite","title","keyword","meta","text","queue","typeDelay","typeDelayStep","maxTypeDelay","dynamicDelay","locale","translations","domain","locale_data","replaceTarget","resetTarget","elementTarget","marker","keywordAnalysisActive","contentAnalysisActive","createDefaultSnippetPreview","targetElement","document","getElementById","config","targets","snippet","analyzerApp","saveSnippetData","isValidSnippetPreview","snippetPreview","prototype","isPrototypeOf","verifyArguments","args","getData","App","refresh","bind","_pureRefresh","i18n","constructI18n","initializeAssessors","pluggable","defaultOutputElement","getDefaultOutputElement","showLoadingDialog","refObj","call","initSnippetPreview","initAssessorPresenters","output","contentOutput","switchAssessors","useCornerStone","seoAssessor","getSeoAssessor","contentAssessor","getContentAssessor","cornerStoneSeoAssessor","defaultSeoAssessor","cornerStoneContentAssessor","defaultContentAssessor","initializeSEOAssessor","initializeContentAssessor","extendConfig","extendSampleText","defaultSampleText","key","defaultTranslations","rawData","data","getAnalyzerData","metaTitle","url","metaDesc","loaded","_applyModifications","runAnalyzer","renderTemplate","callRegisteredEventBinder","bindEvents","init","seoAssessorPresenter","assessor","contentAssessorPresenter","bindInputEvent","i","length","elem","addEventListener","reloadSnippetText","reRender","startTime","startTimestamp","Date","getTime","endTime","endTimestamp","analyzerData","modifyData","paper","description","titleWidth","getTitleWidth","permalink","researcher","setPaper","runKeywordAnalysis","runContentAnalysis","_renderAnalysisResults","assess","overallSeoScore","calculateOverallScore","results","overallContentScore","JSON","parse","stringify","pluginsLoaded","removeLoadingDialog","outputElement","dialogDiv","createElement","className","id","appendChild","updateLoadingDialog","plugins","dialog","textContent","plugin","pluginName","innerHTML","status","loadingDialog","removeChild","registerPlugin","options","_registerPlugin","pluginReady","_ready","pluginReloaded","_reloaded","registerModification","modification","callable","priority","_registerModification","registerAssessment","name","assessment","_registerAssessment","disableMarkers","disableMarker","renderIndividualRatings","setKeyword","getKeyword","render","analyzeTimer","registerTest","console","error","createSnippetPreview","module","exports"],"mappings":"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","file":"app.js","sourcesContent":["\"use strict\";\nrequire(\"./config/config.js\");\nvar SnippetPreview = require(\"./snippetPreview.js\");\nvar defaultsDeep = require(\"lodash/defaultsDeep\");\nvar isObject = require(\"lodash/isObject\");\nvar isString = require(\"lodash/isString\");\nvar MissingArgument = require(\"./errors/missingArgument\");\nvar isUndefined = require(\"lodash/isUndefined\");\nvar isEmpty = require(\"lodash/isEmpty\");\nvar forEach = require(\"lodash/forEach\");\nvar debounce = require(\"lodash/debounce\");\nvar throttle = require(\"lodash/throttle\");\nvar Jed = require(\"jed\");\nvar SEOAssessor = require(\"./seoAssessor.js\");\nvar ContentAssessor = require(\"./contentAssessor.js\");\nvar CornerstoneSEOAssessor = require(\"./cornerstone/seoAssessor.js\");\nvar CornerstoneContentAssessor = require(\"./cornerstone/contentAssessor.js\");\nvar Researcher = require(\"./researcher.js\");\nvar AssessorPresenter = require(\"./renderers/AssessorPresenter.js\");\nvar Pluggable = require(\"./pluggable.js\");\nvar Paper = require(\"./values/Paper.js\");\nvar removeHtmlBlocks = require(\"./stringProcessing/htmlParser.js\");\nvar inputDebounceDelay = 400;\n/**\n * Default config for YoastSEO.js\n *\n * @type {Object}\n */\nvar defaults = {\n    callbacks: {\n        bindElementEvents: function () { },\n        updateSnippetValues: function () { },\n        saveScores: function () { },\n        saveContentScore: function () { },\n        updatedContentResults: function () { },\n        updatedKeywordsResults: function () { },\n    },\n    sampleText: {\n        baseUrl: \"example.org/\",\n        snippetCite: \"example-post/\",\n        title: \"This is an example title - edit by clicking here\",\n        keyword: \"Choose a focus keyword\",\n        meta: \"Modify your meta description by editing it right here\",\n        text: \"Start writing your text!\",\n    },\n    queue: [\"wordCount\",\n        \"keywordDensity\",\n        \"subHeadings\",\n        \"stopwords\",\n        \"fleschReading\",\n        \"linkCount\",\n        \"imageCount\",\n        \"urlKeyword\",\n        \"urlLength\",\n        \"metaDescription\",\n        \"pageTitleKeyword\",\n        \"pageTitleWidth\",\n        \"firstParagraph\",\n        \"'keywordDoubles\"],\n    typeDelay: 3000,\n    typeDelayStep: 1500,\n    maxTypeDelay: 5000,\n    dynamicDelay: true,\n    locale: \"en_US\",\n    translations: {\n        domain: \"js-text-analysis\",\n        // eslint-disable-next-line camelcase\n        locale_data: {\n            \"js-text-analysis\": {\n                \"\": {},\n            },\n        },\n    },\n    replaceTarget: [],\n    resetTarget: [],\n    elementTarget: [],\n    marker: function () { },\n    keywordAnalysisActive: true,\n    contentAnalysisActive: true,\n};\n/**\n * Creates a default snippet preview, this can be used if no snippet preview has been passed.\n *\n * @private\n * @this App\n *\n * @returns {SnippetPreview} The SnippetPreview object.\n */\nfunction createDefaultSnippetPreview() {\n    var targetElement = document.getElementById(this.config.targets.snippet);\n    return new SnippetPreview({\n        analyzerApp: this,\n        targetElement: targetElement,\n        callbacks: {\n            saveSnippetData: this.config.callbacks.saveSnippetData,\n        },\n    });\n}\n/**\n * Returns whether or not the given argument is a valid SnippetPreview object.\n *\n * @param   {*}         snippetPreview  The 'object' to check against.\n * @returns {boolean}                   Whether or not it's a valid SnippetPreview object.\n */\nfunction isValidSnippetPreview(snippetPreview) {\n    return !isUndefined(snippetPreview) && SnippetPreview.prototype.isPrototypeOf(snippetPreview);\n}\n/**\n * Check arguments passed to the App to check if all necessary arguments are set.\n *\n * @private\n * @param {Object}      args            The arguments object passed to the App.\n * @returns {void}\n */\nfunction verifyArguments(args) {\n    if (!isObject(args.callbacks.getData)) {\n        throw new MissingArgument(\"The app requires an object with a getdata callback.\");\n    }\n    if (!isObject(args.targets)) {\n        throw new MissingArgument(\"`targets` is a required App argument, `targets` is not an object.\");\n    }\n    // The args.targets.snippet argument is only required if not SnippetPreview object has been passed.\n    if (!isValidSnippetPreview(args.snippetPreview) && !isString(args.targets.snippet)) {\n        throw new MissingArgument(\"A snippet preview is required. When no SnippetPreview object isn't passed to \" +\n            \"the App, the `targets.snippet` is a required App argument. `targets.snippet` is not a string.\");\n    }\n}\n/**\n * This should return an object with the given properties\n *\n * @callback YoastSEO.App~getData\n * @returns {Object} data\n * @returns {String} data.keyword The keyword that should be used\n * @returns {String} data.meta\n * @returns {String} data.text The text to analyze\n * @returns {String} data.metaTitle The text in the HTML title tag\n * @returns {String} data.title The title to analyze\n * @returns {String} data.url The URL for the given page\n * @returns {String} data.excerpt Excerpt for the pages\n */\n/**\n * @callback YoastSEO.App~getAnalyzerInput\n *\n * @returns {Array} An array containing the analyzer queue\n */\n/**\n * @callback YoastSEO.App~bindElementEvents\n *\n * @param {YoastSEO.App} app A reference to the YoastSEO.App from where this is called.\n */\n/**\n * @callback YoastSEO.App~updateSnippetValues\n *\n * @param {Object} ev The event emitted from the DOM\n */\n/**\n * @callback YoastSEO.App~saveScores\n *\n * @param {int} score The overall keyword score as determined by the assessor.\n * @param {AssessorPresenter} assessorPresenter The assessor presenter that will be used to render the keyword score.\n */\n/**\n * @callback YoastSEO.App~saveContentScore\n *\n * @param {int} score The overall content score as determined by the assessor.\n * @param {AssessorPresenter} assessorPresenter The assessor presenter that will be used to render the content score.\n */\n/**\n * @callback YoastSEO.App~updatedContentResults\n *\n * @param {Object[]} result The updated content analysis results.\n * @param {number} result[].score The SEO score.\n * @param {string} result[].rating String representation of the SEO score.\n * @param {string} result[].text Textual explanation of the score.\n * @param {number} overallContentScore The overall content SEO score.\n */\n/**\n * @callback YoastSEO.App~updatedKeywordsResults\n *\n * @param {Object[]} result The updated keywords analysis results.\n * @param {number} result[].score The SEO score.\n * @param {string} result[].rating String representation of the SEO score.\n * @param {string} result[].text Textual explanation of the score.\n * @param {number} overallContentScore The overall keywords SEO score.\n */\n/**\n * Loader for the analyzer, loads the eventbinder and the elementdefiner\n *\n * @param {Object} args The arguments passed to the loader.\n * @param {Object} args.translations Jed compatible translations.\n * @param {Object} args.targets Targets to retrieve or set on.\n * @param {String} args.targets.snippet ID for the snippet preview element.\n * @param {String} args.targets.output ID for the element to put the output of the analyzer in.\n * @param {int} args.typeDelay Number of milliseconds to wait between typing to refresh the analyzer output.\n * @param {boolean} args.dynamicDelay   Whether to enable dynamic delay, will ignore type delay if the analyzer takes a long time.\n *                                      Applicable on slow devices.\n * @param {int} args.maxTypeDelay The maximum amount of type delay even if dynamic delay is on.\n * @param {int} args.typeDelayStep The amount with which to increase the typeDelay on each step when dynamic delay is enabled.\n * @param {Object} args.callbacks The callbacks that the app requires.\n * @param {Object} args.assessor The Assessor to use instead of the default assessor.\n * @param {YoastSEO.App~getData} args.callbacks.getData Called to retrieve input data\n * @param {YoastSEO.App~getAnalyzerInput} args.callbacks.getAnalyzerInput Called to retrieve input for the analyzer.\n * @param {YoastSEO.App~bindElementEvents} args.callbacks.bindElementEvents Called to bind events to the DOM elements.\n * @param {YoastSEO.App~updateSnippetValues} args.callbacks.updateSnippetValues Called when the snippet values need to be updated.\n * @param {YoastSEO.App~saveScores} args.callbacks.saveScores Called when the score has been determined by the analyzer.\n * @param {YoastSEO.App~saveContentScore} args.callback.saveContentScore Called when the content score has been\n *                                                                       determined by the assessor.\n * @param {YoastSEO.App~updatedContentResults} args.callbacks.updatedContentResults Called when the score has been determined\n *                                                                                  by the analyzer.\n * @param {YoastSEO.App~updatedKeywordsResults} args.callback.updatedKeywordsResults Called when the content score has been\n *                                                                                   determined by the assessor.\n * @param {Function} args.callbacks.saveSnippetData Function called when the snippet data is changed.\n * @param {Function} args.marker The marker to use to apply the list of marks retrieved from an assessment.\n *\n * @param {SnippetPreview} args.snippetPreview The SnippetPreview object to be used.\n *\n * @constructor\n */\nvar App = function (args) {\n    if (!isObject(args)) {\n        args = {};\n    }\n    defaultsDeep(args, defaults);\n    verifyArguments(args);\n    this.config = args;\n    this.refresh = debounce(this.refresh.bind(this), inputDebounceDelay);\n    this._pureRefresh = throttle(this._pureRefresh.bind(this), this.config.typeDelay);\n    this.callbacks = this.config.callbacks;\n    this.i18n = this.constructI18n(this.config.translations);\n    this.initializeAssessors(args);\n    this.pluggable = new Pluggable(this);\n    this.getData();\n    this.defaultOutputElement = this.getDefaultOutputElement(args);\n    if (this.defaultOutputElement !== \"\") {\n        this.showLoadingDialog();\n    }\n    if (isValidSnippetPreview(args.snippetPreview)) {\n        this.snippetPreview = args.snippetPreview;\n        /* Hack to make sure the snippet preview always has a reference to this App. This way we solve the circular\n        dependency issue. In the future this should be solved by the snippet preview not having a reference to the\n        app.*/\n        if (this.snippetPreview.refObj !== this) {\n            this.snippetPreview.refObj = this;\n            this.snippetPreview.i18n = this.i18n;\n        }\n    }\n    else {\n        this.snippetPreview = createDefaultSnippetPreview.call(this);\n    }\n    this.initSnippetPreview();\n    this.initAssessorPresenters();\n};\n/**\n * Returns the default output element based on which analyses are active.\n *\n * @param {Object} args The arguments passed to the App.\n * @returns {string} The ID of the target that is active.\n */\nApp.prototype.getDefaultOutputElement = function (args) {\n    if (args.keywordAnalysisActive) {\n        return args.targets.output;\n    }\n    if (args.contentAnalysisActive) {\n        return args.targets.contentOutput;\n    }\n    return \"\";\n};\n/**\n * Switches between the cornerstone and default assessors.\n *\n * @param {boolean} useCornerStone True when cornerstone should be used.\n *\n * @returns {void}\n */\nApp.prototype.switchAssessors = function (useCornerStone) {\n    this.seoAssessor = this.getSeoAssessor(useCornerStone);\n    this.contentAssessor = this.getContentAssessor(useCornerStone);\n    this.initAssessorPresenters();\n    this.refresh();\n};\n/**\n * Returns an instance of the seo assessor to use.\n *\n * @param {boolean} useCornerStone True if the cornerstone assessor should be used.\n *\n * @returns {Assessor} The assessor instance.\n */\nApp.prototype.getSeoAssessor = function (useCornerStone) {\n    if (useCornerStone) {\n        return this.cornerStoneSeoAssessor;\n    }\n    return this.defaultSeoAssessor;\n};\n/**\n * Returns an instance of the content assessor to use.\n *\n * @param {boolean} useCornerStone True if the cornerstone assessor should be used.\n *\n * @returns {Assessor} The assessor instance.\n */\nApp.prototype.getContentAssessor = function (useCornerStone) {\n    if (useCornerStone) {\n        return this.cornerStoneContentAssessor;\n    }\n    return this.defaultContentAssessor;\n};\n/**\n * Initializes assessors based on if the respective analysis is active.\n *\n * @param {Object} args The arguments passed to the App.\n * @returns {void}\n */\nApp.prototype.initializeAssessors = function (args) {\n    this.initializeSEOAssessor(args);\n    this.initializeContentAssessor(args);\n};\n/**\n * Initializes the SEO assessor.\n *\n * @param {Object} args The arguments passed to the App.\n * @returns {void}\n */\nApp.prototype.initializeSEOAssessor = function (args) {\n    if (!args.keywordAnalysisActive) {\n        return;\n    }\n    this.defaultSeoAssessor = new SEOAssessor(this.i18n, { marker: this.config.marker });\n    this.cornerStoneSeoAssessor = new CornerstoneSEOAssessor(this.i18n, { marker: this.config.marker });\n    // Set the assessor\n    if (isUndefined(args.seoAssessor)) {\n        this.seoAssessor = this.defaultSeoAssessor;\n    }\n    else {\n        this.seoAssessor = args.seoAssessor;\n    }\n};\n/**\n * Initializes the content assessor.\n *\n * @param {Object} args The arguments passed to the App.\n * @returns {void}\n */\nApp.prototype.initializeContentAssessor = function (args) {\n    if (!args.contentAnalysisActive) {\n        return;\n    }\n    this.defaultContentAssessor = new ContentAssessor(this.i18n, { marker: this.config.marker, locale: this.config.locale });\n    this.cornerStoneContentAssessor = new CornerstoneContentAssessor(this.i18n, { marker: this.config.marker, locale: this.config.locale });\n    // Set the content assessor\n    if (isUndefined(args.contentAssessor)) {\n        this.contentAssessor = this.defaultContentAssessor;\n    }\n    else {\n        this.contentAssessor = args.contentAssessor;\n    }\n};\n/**\n * Extend the config with defaults.\n *\n * @param   {Object}    args    The arguments to be extended.\n * @returns {Object}    args    The extended arguments.\n */\nApp.prototype.extendConfig = function (args) {\n    args.sampleText = this.extendSampleText(args.sampleText);\n    args.locale = args.locale || \"en_US\";\n    return args;\n};\n/**\n * Extend sample text config with defaults.\n *\n * @param   {Object}    sampleText  The sample text to be extended.\n * @returns {Object}    sampleText  The extended sample text.\n */\nApp.prototype.extendSampleText = function (sampleText) {\n    var defaultSampleText = defaults.sampleText;\n    if (isUndefined(sampleText)) {\n        return defaultSampleText;\n    }\n    for (var key in sampleText) {\n        if (isUndefined(sampleText[key])) {\n            sampleText[key] = defaultSampleText[key];\n        }\n    }\n    return sampleText;\n};\n/**\n * Initializes i18n object based on passed configuration\n *\n * @param {Object}  translations    The translations to be used in the current instance.\n * @returns {void}\n */\nApp.prototype.constructI18n = function (translations) {\n    var defaultTranslations = {\n        domain: \"js-text-analysis\",\n        // eslint-disable-next-line camelcase\n        locale_data: {\n            \"js-text-analysis\": {\n                \"\": {},\n            },\n        },\n    };\n    // Use default object to prevent Jed from erroring out.\n    translations = translations || defaultTranslations;\n    return new Jed(translations);\n};\n/**\n * Retrieves data from the callbacks.getData and applies modification to store these in this.rawData.\n *\n * @returns {void}\n */\nApp.prototype.getData = function () {\n    this.rawData = this.callbacks.getData();\n    if (!isUndefined(this.snippetPreview)) {\n        // Gets the data FOR the analyzer\n        var data = this.snippetPreview.getAnalyzerData();\n        this.rawData.metaTitle = data.title;\n        this.rawData.url = data.url;\n        this.rawData.meta = data.metaDesc;\n    }\n    if (this.pluggable.loaded) {\n        this.rawData.metaTitle = this.pluggable._applyModifications(\"data_page_title\", this.rawData.metaTitle);\n        this.rawData.meta = this.pluggable._applyModifications(\"data_meta_desc\", this.rawData.meta);\n    }\n    this.rawData.locale = this.config.locale;\n};\n/**\n * Refreshes the analyzer and output of the analyzer, is debounced for a better experience.\n *\n * @returns {void}\n */\nApp.prototype.refresh = function () {\n    // Until all plugins are loaded, do not trigger a refresh.\n    if (!this.pluggable.loaded) {\n        return;\n    }\n    this._pureRefresh();\n};\n/**\n * Refreshes the analyzer and output of the analyzer, is throttled to prevent performance issues.\n *\n * @returns {void}\n *\n * @private\n */\nApp.prototype._pureRefresh = function () {\n    this.getData();\n    this.runAnalyzer();\n};\n/**\n * Initializes the snippet preview for this App.\n *\n * @returns {void}\n */\nApp.prototype.initSnippetPreview = function () {\n    this.snippetPreview.renderTemplate();\n    this.snippetPreview.callRegisteredEventBinder();\n    this.snippetPreview.bindEvents();\n    this.snippetPreview.init();\n};\n/**\n * Initializes the assessorpresenters for content and SEO.\n *\n * @returns {void}\n */\nApp.prototype.initAssessorPresenters = function () {\n    // Pass the assessor result through to the formatter\n    if (!isUndefined(this.config.targets.output)) {\n        this.seoAssessorPresenter = new AssessorPresenter({\n            targets: {\n                output: this.config.targets.output,\n            },\n            assessor: this.seoAssessor,\n            i18n: this.i18n,\n        });\n    }\n    if (!isUndefined(this.config.targets.contentOutput)) {\n        // Pass the assessor result through to the formatter\n        this.contentAssessorPresenter = new AssessorPresenter({\n            targets: {\n                output: this.config.targets.contentOutput,\n            },\n            assessor: this.contentAssessor,\n            i18n: this.i18n,\n        });\n    }\n};\n/**\n * Binds the refresh function to the input of the targetElement on the page.\n *\n * @returns {void}\n */\nApp.prototype.bindInputEvent = function () {\n    for (var i = 0; i < this.config.elementTarget.length; i++) {\n        var elem = document.getElementById(this.config.elementTarget[i]);\n        elem.addEventListener(\"input\", this.refresh.bind(this));\n    }\n};\n/**\n * Runs the rerender function of the snippetPreview if that object is defined.\n *\n * @returns {void}\n */\nApp.prototype.reloadSnippetText = function () {\n    if (isUndefined(this.snippetPreview)) {\n        this.snippetPreview.reRender();\n    }\n};\n/**\n * Sets the startTime timestamp.\n *\n * @returns {void}\n */\nApp.prototype.startTime = function () {\n    this.startTimestamp = new Date().getTime();\n};\n/**\n * Sets the endTime timestamp and compares with startTime to determine typeDelayincrease.\n *\n * @returns {void}\n */\nApp.prototype.endTime = function () {\n    this.endTimestamp = new Date().getTime();\n    if (this.endTimestamp - this.startTimestamp > this.config.typeDelay) {\n        if (this.config.typeDelay < (this.config.maxTypeDelay - this.config.typeDelayStep)) {\n            this.config.typeDelay += this.config.typeDelayStep;\n        }\n    }\n};\n/**\n * Inits a new pageAnalyzer with the inputs from the getInput function and calls the scoreFormatter\n * to format outputs.\n *\n * @returns {void}\n */\nApp.prototype.runAnalyzer = function () {\n    if (this.pluggable.loaded === false) {\n        return;\n    }\n    if (this.config.dynamicDelay) {\n        this.startTime();\n    }\n    this.analyzerData = this.modifyData(this.rawData);\n    this.snippetPreview.refresh();\n    let text = this.analyzerData.text;\n    // Insert HTML stripping code\n    text = removeHtmlBlocks(text);\n    // Create a paper object for the Researcher\n    this.paper = new Paper(text, {\n        keyword: this.analyzerData.keyword,\n        description: this.analyzerData.meta,\n        url: this.analyzerData.url,\n        title: this.analyzerData.metaTitle,\n        titleWidth: this.snippetPreview.getTitleWidth(),\n        locale: this.config.locale,\n        permalink: this.analyzerData.permalink,\n    });\n    // The new researcher\n    if (isUndefined(this.researcher)) {\n        this.researcher = new Researcher(this.paper);\n    }\n    else {\n        this.researcher.setPaper(this.paper);\n    }\n    this.runKeywordAnalysis();\n    this.runContentAnalysis();\n    this._renderAnalysisResults();\n    if (this.config.dynamicDelay) {\n        this.endTime();\n    }\n    this.snippetPreview.reRender();\n};\n/**\n * Runs the keyword analysis and calls the appropriate callbacks.\n *\n * @returns {void}\n */\nApp.prototype.runKeywordAnalysis = function () {\n    if (this.config.keywordAnalysisActive) {\n        this.seoAssessor.assess(this.paper);\n        const overallSeoScore = this.seoAssessor.calculateOverallScore();\n        if (!isUndefined(this.callbacks.updatedKeywordsResults)) {\n            this.callbacks.updatedKeywordsResults(this.seoAssessor.results, overallSeoScore);\n        }\n        if (!isUndefined(this.callbacks.saveScores)) {\n            this.callbacks.saveScores(overallSeoScore, this.seoAssessorPresenter);\n        }\n    }\n};\n/**\n * Runs the content analysis and calls the appropriate callbacks.\n *\n * @returns {void}\n */\nApp.prototype.runContentAnalysis = function () {\n    if (this.config.contentAnalysisActive) {\n        this.contentAssessor.assess(this.paper);\n        const overallContentScore = this.contentAssessor.calculateOverallScore();\n        if (!isUndefined(this.callbacks.updatedContentResults)) {\n            this.callbacks.updatedContentResults(this.contentAssessor.results, overallContentScore);\n        }\n        if (!isUndefined(this.callbacks.saveContentScore)) {\n            this.callbacks.saveContentScore(overallContentScore, this.contentAssessorPresenter);\n        }\n    }\n};\n/**\n * Modifies the data with plugins before it is sent to the analyzer.\n *\n * @param   {Object}  data      The data to be modified.\n * @returns {Object}            The data with the applied modifications.\n */\nApp.prototype.modifyData = function (data) {\n    // Copy rawdata to lose object reference.\n    data = JSON.parse(JSON.stringify(data));\n    data.text = this.pluggable._applyModifications(\"content\", data.text);\n    data.metaTitle = this.pluggable._applyModifications(\"title\", data.metaTitle);\n    return data;\n};\n/**\n * Function to fire the analyzer when all plugins are loaded, removes the loading dialog.\n *\n * @returns {void}\n */\nApp.prototype.pluginsLoaded = function () {\n    this.removeLoadingDialog();\n    this.refresh();\n};\n/**\n * Shows the loading dialog which shows the loading of the plugins.\n *\n * @returns {void}\n */\nApp.prototype.showLoadingDialog = function () {\n    var outputElement = document.getElementById(this.defaultOutputElement);\n    if (this.defaultOutputElement !== \"\" && !isEmpty(outputElement)) {\n        var dialogDiv = document.createElement(\"div\");\n        dialogDiv.className = \"YoastSEO_msg\";\n        dialogDiv.id = \"YoastSEO-plugin-loading\";\n        document.getElementById(this.defaultOutputElement).appendChild(dialogDiv);\n    }\n};\n/**\n * Updates the loading plugins. Uses the plugins as arguments to show which plugins are loading.\n *\n * @param   {Object}  plugins   The plugins to be parsed into the dialog.\n * @returns {void}\n */\nApp.prototype.updateLoadingDialog = function (plugins) {\n    var outputElement = document.getElementById(this.defaultOutputElement);\n    if (this.defaultOutputElement === \"\" || isEmpty(outputElement)) {\n        return;\n    }\n    var dialog = document.getElementById(\"YoastSEO-plugin-loading\");\n    dialog.textContent = \"\";\n    forEach(plugins, function (plugin, pluginName) {\n        dialog.innerHTML += \"<span class=left>\" + pluginName + \"</span><span class=right \" +\n            plugin.status + \">\" + plugin.status + \"</span><br />\";\n    });\n    dialog.innerHTML += \"<span class=bufferbar></span>\";\n};\n/**\n * Removes the pluging load dialog.\n *\n * @returns {void}\n */\nApp.prototype.removeLoadingDialog = function () {\n    var outputElement = document.getElementById(this.defaultOutputElement);\n    var loadingDialog = document.getElementById(\"YoastSEO-plugin-loading\");\n    if ((this.defaultOutputElement !== \"\" && !isEmpty(outputElement)) && !isEmpty(loadingDialog)) {\n        document.getElementById(this.defaultOutputElement).removeChild(document.getElementById(\"YoastSEO-plugin-loading\"));\n    }\n};\n// ***** PLUGGABLE PUBLIC DSL ***** //\n/**\n * Delegates to `YoastSEO.app.pluggable.registerPlugin`\n *\n * @param {string}  pluginName      The name of the plugin to be registered.\n * @param {object}  options         The options object.\n * @param {string}  options.status  The status of the plugin being registered. Can either be \"loading\" or \"ready\".\n * @returns {boolean}               Whether or not it was successfully registered.\n */\nApp.prototype.registerPlugin = function (pluginName, options) {\n    return this.pluggable._registerPlugin(pluginName, options);\n};\n/**\n * Delegates to `YoastSEO.app.pluggable.ready`\n *\n * @param {string}  pluginName  The name of the plugin to check.\n * @returns {boolean}           Whether or not the plugin is ready.\n */\nApp.prototype.pluginReady = function (pluginName) {\n    return this.pluggable._ready(pluginName);\n};\n/**\n * Delegates to `YoastSEO.app.pluggable.reloaded`\n *\n * @param {string} pluginName   The name of the plugin to reload\n * @returns {boolean}           Whether or not the plugin was reloaded.\n */\nApp.prototype.pluginReloaded = function (pluginName) {\n    return this.pluggable._reloaded(pluginName);\n};\n/**\n * Delegates to `YoastSEO.app.pluggable.registerModification`\n *\n * @param {string}      modification \t\tThe name of the filter\n * @param {function}    callable \t\t \tThe callable function\n * @param {string}      pluginName \t\t    The plugin that is registering the modification.\n * @param {number}      priority \t\t \t(optional) Used to specify the order in which the callables associated with a particular filter are\n                                            called.\n * \t\t\t\t\t\t\t\t\t        Lower numbers correspond with earlier execution.\n * @returns \t\t\t{boolean}           Whether or not the modification was successfully registered.\n */\nApp.prototype.registerModification = function (modification, callable, pluginName, priority) {\n    return this.pluggable._registerModification(modification, callable, pluginName, priority);\n};\n/**\n * Registers a custom assessment for use in the analyzer, this will result in a new line in the analyzer results.\n * The function needs to use the assessmentresult to return an result  based on the contents of the page/posts.\n *\n * Score 0 results in a grey circle if it is not explicitly set by using setscore\n * Scores 0, 1, 2, 3 and 4 result in a red circle\n * Scores 6 and 7 result in a yellow circle\n * Scores 8, 9 and 10 result in a green circle\n *\n * @param {string} name Name of the test.\n * @param {function} assessment The assessment to run\n * @param {string}   pluginName The plugin that is registering the test.\n * @returns {boolean} Whether or not the test was successfully registered.\n */\nApp.prototype.registerAssessment = function (name, assessment, pluginName) {\n    if (!isUndefined(this.seoAssessor)) {\n        return this.pluggable._registerAssessment(this.defaultSeoAssessor, name, assessment, pluginName) &&\n            this.pluggable._registerAssessment(this.cornerStoneSeoAssessor, name, assessment, pluginName);\n    }\n};\n/**\n * Disables markers visually in the UI.\n *\n * @returns {void}\n */\nApp.prototype.disableMarkers = function () {\n    if (!isUndefined(this.seoAssessorPresenter)) {\n        this.seoAssessorPresenter.disableMarker();\n    }\n    if (!isUndefined(this.contentAssessorPresenter)) {\n        this.contentAssessorPresenter.disableMarker();\n    }\n};\n/**\n * Renders the content and keyword analysis results.\n *\n * @returns {void}\n */\nApp.prototype._renderAnalysisResults = function () {\n    if (this.config.contentAnalysisActive && !isUndefined(this.contentAssessorPresenter)) {\n        this.contentAssessorPresenter.renderIndividualRatings();\n    }\n    if (this.config.keywordAnalysisActive && !isUndefined(this.seoAssessorPresenter)) {\n        this.seoAssessorPresenter.setKeyword(this.paper.getKeyword());\n        this.seoAssessorPresenter.render();\n    }\n};\n// Deprecated functions\n/**\n * The analyzeTimer calls the checkInputs function with a delay, so the function won't be executed\n * at every keystroke checks the reference object, so this function can be called from anywhere,\n * without problems with different scopes.\n *\n * @deprecated: 1.3 - Use this.refresh() instead.\n *\n * @returns {void}\n */\nApp.prototype.analyzeTimer = function () {\n    this.refresh();\n};\n/**\n * Registers a custom test for use in the analyzer, this will result in a new line in the analyzer results. The function\n * has to return a result based on the contents of the page/posts.\n *\n * The scoring object is a special object with definitions about how to translate a result from your analysis function\n * to a SEO score.\n *\n * Negative scores result in a red circle\n * Scores 1, 2, 3, 4 and 5 result in a orange circle\n * Scores 6 and 7 result in a yellow circle\n * Scores 8, 9 and 10 result in a red circle\n *\n * @returns {void}\n *\n * @deprecated since version 1.2\n */\nApp.prototype.registerTest = function () {\n    console.error(\"This function is deprecated, please use registerAssessment\");\n};\n/**\n * Creates the elements for the snippetPreview\n *\n * @deprecated Don't create a snippet preview using this method, create it directly using the prototype and pass it as\n * an argument instead.\n *\n * @returns {void}\n */\nApp.prototype.createSnippetPreview = function () {\n    this.snippetPreview = createDefaultSnippetPreview.call(this);\n    this.initSnippetPreview();\n};\nmodule.exports = App;\n//# sourceMappingURL=app.js.map"]}