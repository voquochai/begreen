{"version":3,"sources":["../../../../js/assessments/readability/fleschReadingEaseAssessment.js"],"names":["AssessmentResult","require","inRange","getLanguageAvailability","availableLanguages","calculateFleschReadingResult","fleschReadingScore","i18n","score","resultText","dgettext","note","fleschReadingEaseAssessment","paper","researcher","getResearch","text","url","fleschReadingResult","sprintf","assessmentResult","setScore","setText","module","exports","identifier","getResult","isApplicable","isLanguageAvailable","getLocale","hasText"],"mappings":"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","file":"fleschReadingEaseAssessment.js","sourcesContent":["\"use strict\";\nvar AssessmentResult = require(\"../../values/AssessmentResult.js\");\nvar inRange = require(\"lodash/inRange\");\nvar getLanguageAvailability = require(\"../../helpers/getLanguageAvailability.js\");\nvar availableLanguages = [\"en\", \"nl\", \"de\", \"it\"];\n/**\n * Calculates the assessment result based on the fleschReadingScore\n * @param {int} fleschReadingScore The score from the fleschReadingtest\n * @param {object} i18n The i18n-object used for parsing translations\n * @returns {object} object with score, resultText and note\n */\nvar calculateFleschReadingResult = function (fleschReadingScore, i18n) {\n    if (fleschReadingScore > 90) {\n        return {\n            score: 9,\n            resultText: i18n.dgettext(\"js-text-analysis\", \"very easy\"),\n            note: \"\",\n        };\n    }\n    if (inRange(fleschReadingScore, 80, 90)) {\n        return {\n            score: 9,\n            resultText: i18n.dgettext(\"js-text-analysis\", \"easy\"),\n            note: \"\",\n        };\n    }\n    if (inRange(fleschReadingScore, 70, 80)) {\n        return {\n            score: 9,\n            resultText: i18n.dgettext(\"js-text-analysis\", \"fairly easy\"),\n            note: \"\",\n        };\n    }\n    if (inRange(fleschReadingScore, 60, 70)) {\n        return {\n            score: 9,\n            resultText: i18n.dgettext(\"js-text-analysis\", \"ok\"),\n            note: \"\",\n        };\n    }\n    if (inRange(fleschReadingScore, 50, 60)) {\n        return {\n            score: 6,\n            resultText: i18n.dgettext(\"js-text-analysis\", \"fairly difficult\"),\n            note: i18n.dgettext(\"js-text-analysis\", \"Try to make shorter sentences to improve readability.\"),\n        };\n    }\n    if (inRange(fleschReadingScore, 30, 50)) {\n        return {\n            score: 3,\n            resultText: i18n.dgettext(\"js-text-analysis\", \"difficult\"),\n            note: i18n.dgettext(\"js-text-analysis\", \"Try to make shorter sentences, using less difficult words to improve readability.\"),\n        };\n    }\n    if (fleschReadingScore < 30) {\n        return {\n            score: 3,\n            resultText: i18n.dgettext(\"js-text-analysis\", \"very difficult\"),\n            note: i18n.dgettext(\"js-text-analysis\", \"Try to make shorter sentences, using less difficult words to improve readability.\"),\n        };\n    }\n};\n/**\n * The assessment that runs the FleschReading on the paper.\n *\n * @param {object} paper The paper to run this assessment on\n * @param {object} researcher The researcher used for the assessment\n * @param {object} i18n The i18n-object used for parsing translations\n * @returns {object} an assessmentresult with the score and formatted text.\n */\nvar fleschReadingEaseAssessment = function (paper, researcher, i18n) {\n    var fleschReadingScore = researcher.getResearch(\"calculateFleschReading\");\n    /* Translators: %1$s expands to the numeric flesch reading ease score, %2$s to a link to a Yoast.com article about Flesch ease reading score,\n     %3$s to the easyness of reading, %4$s expands to a note about the flesch reading score. */\n    var text = i18n.dgettext(\"js-text-analysis\", \"The copy scores %1$s in the %2$s test, which is considered %3$s to read. %4$s\");\n    var url = \"<a href='https://yoa.st/flesch-reading' target='_blank'>Flesch Reading Ease</a>\";\n    // Scores must be between 0 and 100;\n    if (fleschReadingScore < 0) {\n        fleschReadingScore = 0;\n    }\n    if (fleschReadingScore > 100) {\n        fleschReadingScore = 100;\n    }\n    var fleschReadingResult = calculateFleschReadingResult(fleschReadingScore, i18n);\n    text = i18n.sprintf(text, fleschReadingScore, url, fleschReadingResult.resultText, fleschReadingResult.note);\n    var assessmentResult = new AssessmentResult();\n    assessmentResult.setScore(fleschReadingResult.score);\n    assessmentResult.setText(text);\n    return assessmentResult;\n};\nmodule.exports = {\n    identifier: \"fleschReadingEase\",\n    getResult: fleschReadingEaseAssessment,\n    isApplicable: function (paper) {\n        var isLanguageAvailable = getLanguageAvailability(paper.getLocale(), availableLanguages);\n        return (isLanguageAvailable && paper.hasText());\n    },\n};\n//# sourceMappingURL=fleschReadingEaseAssessment.js.map"]}