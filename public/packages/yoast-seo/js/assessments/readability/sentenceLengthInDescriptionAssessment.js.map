{"version":3,"sources":["../../../../js/assessments/readability/sentenceLengthInDescriptionAssessment.js"],"names":["AssessmentResult","require","formatNumber","countTooLongSentences","inRange","inRangeEndInclusive","calculateSentenceLengthResult","sentences","i18n","score","percentage","recommendedValue","tooLongTotal","length","sentenceLengthURL","text","sprintf","dgettext","dngettext","sentenceLengthInDescriptionAssessment","paper","researcher","sentenceCount","getResearch","sentenceResult","assessmentResult","setScore","setText","module","exports","identifier","getResult","isApplicable","hasDescription"],"mappings":"AAAA;;AACA,IAAIA,mBAAmBC,QAAQ,kCAAR,CAAvB;AACA,IAAIC,eAAeD,QAAQ,+BAAR,CAAnB;AACA,IAAIE,wBAAwBF,QAAQ,uDAAR,CAA5B;AACA,IAAIG,UAAUH,QAAQ,0BAAR,EAAoCI,mBAAlD;AACA;;;;;;AAMA,IAAIC,gCAAgC,SAAhCA,6BAAgC,CAAUC,SAAV,EAAqBC,IAArB,EAA2B;AAC3D,QAAIC,KAAJ;AACA,QAAIC,aAAa,CAAjB;AACA,QAAIC,mBAAmB,EAAvB;AACA,QAAIC,eAAeT,sBAAsBI,SAAtB,EAAiCI,gBAAjC,EAAmDE,MAAtE;AACA,QAAIC,oBAAoB,2DAAxB;AACA,QAAIP,UAAUM,MAAV,KAAqB,CAAzB,EAA4B;AACxBH,qBAAaR,aAAcU,eAAeL,UAAUM,MAA1B,GAAoC,GAAjD,CAAb;AACH;AACD,QAAIH,cAAc,EAAlB,EAAsB;AAClB;AACAD,gBAAQ,CAAR;AACH;AACD,QAAIL,QAAQM,UAAR,EAAoB,EAApB,EAAwB,EAAxB,CAAJ,EAAiC;AAC7B;AACAD,gBAAQ,CAAR;AACH;AACD,QAAIC,aAAa,EAAjB,EAAqB;AACjB;AACAD,gBAAQ,CAAR;AACH;AACD,QAAIA,SAAS,CAAb,EAAgB;AACZ,eAAO;AACHA,mBAAOA,KADJ;AAEHM,kBAAMP,KAAKQ,OAAL,CAAaR,KAAKS,QAAL,CAAc,kBAAd;AACnB;AACA;AACA,iFAHmB,CAAb,EAGkEH,iBAHlE,EAGqFH,gBAHrF,EAGuG,MAHvG;AAFH,SAAP;AAOH;AACD,WAAO;AACHF,eAAOA,KADJ;AAEHM,cAAMP,KAAKQ,OAAL,CAAaR,KAAKU,SAAL,CAAe,kBAAf;AACnB;AACA;AACA,4GAHmB,EAGmF,uGAHnF,EAG4LN,YAH5L,CAAb,EAGwNA,YAHxN,EAGsOE,iBAHtO,EAGyPH,gBAHzP,EAG2Q,MAH3Q;AAFH,KAAP;AAOH,CArCD;AAsCA;;;;;;;;AAQA,IAAIQ,wCAAwC,SAAxCA,qCAAwC,CAAUC,KAAV,EAAiBC,UAAjB,EAA6Bb,IAA7B,EAAmC;AAC3E,QAAIc,gBAAgBD,WAAWE,WAAX,CAAuB,+BAAvB,CAApB;AACA,QAAIC,iBAAiBlB,8BAA8BgB,aAA9B,EAA6Cd,IAA7C,CAArB;AACA,QAAIiB,mBAAmB,IAAIzB,gBAAJ,EAAvB;AACAyB,qBAAiBC,QAAjB,CAA0BF,eAAef,KAAzC;AACAgB,qBAAiBE,OAAjB,CAAyBH,eAAeT,IAAxC;AACA,WAAOU,gBAAP;AACH,CAPD;AAQAG,OAAOC,OAAP,GAAiB;AACbC,gBAAY,+BADC;AAEbC,eAAWZ,qCAFE;AAGba,kBAAc,sBAAUZ,KAAV,EAAiB;AAC3B,eAAOA,MAAMa,cAAN,EAAP;AACH;AALY,CAAjB;AAOA","file":"sentenceLengthInDescriptionAssessment.js","sourcesContent":["\"use strict\";\nvar AssessmentResult = require(\"../../values/AssessmentResult.js\");\nvar formatNumber = require(\"../../helpers/formatNumber.js\");\nvar countTooLongSentences = require(\"./../../assessmentHelpers/checkForTooLongSentences.js\");\nvar inRange = require(\"../../helpers/inRange.js\").inRangeEndInclusive;\n/**\n * Calculates sentence length score\n * @param {array} sentences The array containing sentences.\n * @param {object} i18n The object used for translations.\n * @returns {object} Object containing score and text.\n */\nvar calculateSentenceLengthResult = function (sentences, i18n) {\n    var score;\n    var percentage = 0;\n    var recommendedValue = 20;\n    var tooLongTotal = countTooLongSentences(sentences, recommendedValue).length;\n    var sentenceLengthURL = \"<a href='https://yoa.st/short-sentences' target='_blank'>\";\n    if (sentences.length !== 0) {\n        percentage = formatNumber((tooLongTotal / sentences.length) * 100);\n    }\n    if (percentage <= 20) {\n        // Green indicator.\n        score = 9;\n    }\n    if (inRange(percentage, 20, 25)) {\n        // Orange indicator.\n        score = 6;\n    }\n    if (percentage > 25) {\n        // Red indicator.\n        score = 3;\n    }\n    if (score >= 7) {\n        return {\n            score: score,\n            text: i18n.sprintf(i18n.dgettext(\"js-text-analysis\", \n            // Translators: %1$s expands to a link on yoast.com, %2$s expands to the recommended maximum sentence length,\n            // %3$s expands to the anchor end tag.\n            \"The meta description contains no sentences %1$sover %2$s words%3$s.\"), sentenceLengthURL, recommendedValue, \"</a>\"),\n        };\n    }\n    return {\n        score: score,\n        text: i18n.sprintf(i18n.dngettext(\"js-text-analysis\", \n        // Translators: %1$d expands to number of sentences, %2$s expands to a link on yoast.com,\n        // %3$s expands to the recommended maximum sentence length, %4$s expands to the anchor end tag.\n        \"The meta description contains %1$d sentence %2$sover %3$s words%4$s. Try to shorten this sentence.\", \"The meta description contains %1$d sentences %2$sover %3$s words%4$s. Try to shorten these sentences.\", tooLongTotal), tooLongTotal, sentenceLengthURL, recommendedValue, \"</a>\"),\n    };\n};\n/**\n * Scores the percentage of sentences including more than the recommended number of words.\n *\n * @param {object} paper The paper to use for the assessment.\n * @param {object} researcher The researcher used for calling research.\n * @param {object} i18n The object used for translations.\n * @returns {object} The Assessmentresult\n */\nvar sentenceLengthInDescriptionAssessment = function (paper, researcher, i18n) {\n    var sentenceCount = researcher.getResearch(\"countSentencesFromDescription\");\n    var sentenceResult = calculateSentenceLengthResult(sentenceCount, i18n);\n    var assessmentResult = new AssessmentResult();\n    assessmentResult.setScore(sentenceResult.score);\n    assessmentResult.setText(sentenceResult.text);\n    return assessmentResult;\n};\nmodule.exports = {\n    identifier: \"metaDescriptionSentenceLength\",\n    getResult: sentenceLengthInDescriptionAssessment,\n    isApplicable: function (paper) {\n        return paper.hasDescription();\n    },\n};\n//# sourceMappingURL=sentenceLengthInDescriptionAssessment.js.map"]}