{"version":3,"sources":["../../../../js/assessments/seo/textImagesAssessment.js"],"names":["AssessmentResult","require","Assessment","merge","TextImagesAssessment","config","defaultConfig","scores","noImages","withAltKeyword","withAltNonKeyword","withAlt","noAlt","identifier","_config","paper","researcher","i18n","assessmentResult","imageCount","getResearch","altProperties","setScore","calculateScore","setText","translateScore","hasText","dgettext","module","exports"],"mappings":"AAAA;;;;;;;;;;AACA,IAAIA,mBAAmBC,QAAQ,kCAAR,CAAvB;AACA,IAAIC,aAAaD,QAAQ,qBAAR,CAAjB;AACA,IAAIE,QAAQF,QAAQ,cAAR,CAAZ;AACA;;;;IAGMG,oB;;;AACF;;;;;;;AAOA,oCAAyB;AAAA,YAAbC,MAAa,uEAAJ,EAAI;;AAAA;;AAAA;;AAErB,YAAIC,gBAAgB;AAChBC,oBAAQ;AACJC,0BAAU,CADN;AAEJC,gCAAgB,CAFZ;AAGJC,mCAAmB,CAHf;AAIJC,yBAAS,CAJL;AAKJC,uBAAO;AALH;AADQ,SAApB;AASA,cAAKC,UAAL,GAAkB,YAAlB;AACA,cAAKC,OAAL,GAAeX,MAAMG,aAAN,EAAqBD,MAArB,CAAf;AAZqB;AAaxB;AACD;;;;;;;;;;;;;kCASUU,K,EAAOC,U,EAAYC,I,EAAM;AAC/B,gBAAIC,mBAAmB,IAAIlB,gBAAJ,EAAvB;AACA,gBAAImB,aAAaH,WAAWI,WAAX,CAAuB,YAAvB,CAAjB;AACA,gBAAIC,gBAAgBL,WAAWI,WAAX,CAAuB,aAAvB,CAApB;AACAF,6BAAiBI,QAAjB,CAA0B,KAAKC,cAAL,CAAoBJ,UAApB,EAAgCE,aAAhC,CAA1B;AACAH,6BAAiBM,OAAjB,CAAyB,KAAKC,cAAL,CAAoBN,UAApB,EAAgCE,aAAhC,EAA+CJ,IAA/C,CAAzB;AACA,mBAAOC,gBAAP;AACH;AACD;;;;;;;;;;qCAOaH,K,EAAO;AAChB,mBAAOA,MAAMW,OAAN,EAAP;AACH;AACD;;;;;;;;;;;uCAQeP,U,EAAYE,a,EAAe;AACtC,gBAAIF,eAAe,CAAnB,EAAsB;AAClB,uBAAO,KAAKL,OAAL,CAAaP,MAAb,CAAoBC,QAA3B;AACH;AACD;AACA,gBAAIa,cAAcZ,cAAd,GAA+B,CAAnC,EAAsC;AAClC,uBAAO,KAAKK,OAAL,CAAaP,MAAb,CAAoBE,cAA3B;AACH;AACD;AACA,gBAAIY,cAAcX,iBAAd,GAAkC,CAAtC,EAAyC;AACrC,uBAAO,KAAKI,OAAL,CAAaP,MAAb,CAAoBG,iBAA3B;AACH;AACD;AACA,gBAAIW,cAAcV,OAAd,GAAwB,CAA5B,EAA+B;AAC3B,uBAAO,KAAKG,OAAL,CAAaP,MAAb,CAAoBI,OAA3B;AACH;AACD;AACA,gBAAIU,cAAcT,KAAd,GAAsB,CAA1B,EAA6B;AACzB,uBAAO,KAAKE,OAAL,CAAaP,MAAb,CAAoBK,KAA3B;AACH;AACD,mBAAO,IAAP;AACH;AACD;;;;;;;;;;;;uCASeO,U,EAAYE,a,EAAeJ,I,EAAM;AAC5C,gBAAIE,eAAe,CAAnB,EAAsB;AAClB,uBAAOF,KAAKU,QAAL,CAAc,kBAAd,EAAkC,qEAAlC,CAAP;AACH;AACD;AACA,gBAAIN,cAAcZ,cAAd,GAA+B,CAAnC,EAAsC;AAClC,uBAAOQ,KAAKU,QAAL,CAAc,kBAAd,EAAkC,wEAAlC,CAAP;AACH;AACD;AACA,gBAAIN,cAAcX,iBAAd,GAAkC,CAAtC,EAAyC;AACrC,uBAAOO,KAAKU,QAAL,CAAc,kBAAd,EAAkC,kFAAlC,CAAP;AACH;AACD;AACA,gBAAIN,cAAcV,OAAd,GAAwB,CAA5B,EAA+B;AAC3B,uBAAOM,KAAKU,QAAL,CAAc,kBAAd,EAAkC,iDAAlC,CAAP;AACH;AACD;AACA,gBAAIN,cAAcT,KAAd,GAAsB,CAA1B,EAA6B;AACzB,uBAAOK,KAAKU,QAAL,CAAc,kBAAd,EAAkC,qDAAlC,CAAP;AACH;AACD,mBAAO,EAAP;AACH;;;;EA7G8BzB,U;;AA+GnC0B,OAAOC,OAAP,GAAiBzB,oBAAjB;AACA","file":"textImagesAssessment.js","sourcesContent":["\"use strict\";\nlet AssessmentResult = require(\"../../values/AssessmentResult.js\");\nlet Assessment = require(\"../../assessment.js\");\nlet merge = require(\"lodash/merge\");\n/**\n * Represents the assessment that will look if the images have alt-tags and checks if the keyword is present in one of them.\n */\nclass TextImagesAssessment extends Assessment {\n    /**\n     * Sets the identifier and the config.\n     *\n     * @param {object} config The configuration to use.\n     *\n     * @returns {void}\n     */\n    constructor(config = {}) {\n        super();\n        let defaultConfig = {\n            scores: {\n                noImages: 3,\n                withAltKeyword: 9,\n                withAltNonKeyword: 6,\n                withAlt: 6,\n                noAlt: 6,\n            },\n        };\n        this.identifier = \"textImages\";\n        this._config = merge(defaultConfig, config);\n    }\n    /**\n     * Execute the Assessment and return a result.\n     *\n     * @param {Paper} paper The Paper object to assess.\n     * @param {Researcher} researcher The Researcher object containing all available researches.\n     * @param {object} i18n The locale object.\n     *\n     * @returns {AssessmentResult} The result of the assessment, containing both a score and a descriptive text.\n     */\n    getResult(paper, researcher, i18n) {\n        let assessmentResult = new AssessmentResult();\n        let imageCount = researcher.getResearch(\"imageCount\");\n        let altProperties = researcher.getResearch(\"altTagCount\");\n        assessmentResult.setScore(this.calculateScore(imageCount, altProperties));\n        assessmentResult.setText(this.translateScore(imageCount, altProperties, i18n));\n        return assessmentResult;\n    }\n    /**\n     * Checks whether the paper has text.\n     *\n     * @param {Paper} paper The paper to use for the assessment.\n     *\n     * @returns {boolean} True when there is text.\n     */\n    isApplicable(paper) {\n        return paper.hasText();\n    }\n    /**\n     * Calculate the score based on the current image count and current image alt-tag count.\n     *\n     * @param {number} imageCount The amount of images to be checked against.\n     * @param {object} altProperties An object containing the various alt-tags.\n     *\n     * @returns {number} The calculated score.\n     */\n    calculateScore(imageCount, altProperties) {\n        if (imageCount === 0) {\n            return this._config.scores.noImages;\n        }\n        // Has alt-tag and keywords\n        if (altProperties.withAltKeyword > 0) {\n            return this._config.scores.withAltKeyword;\n        }\n        // Has alt-tag, but no keywords and it's not okay\n        if (altProperties.withAltNonKeyword > 0) {\n            return this._config.scores.withAltNonKeyword;\n        }\n        // Has alt-tag, but no keyword is set\n        if (altProperties.withAlt > 0) {\n            return this._config.scores.withAlt;\n        }\n        // Has no alt-tag\n        if (altProperties.noAlt > 0) {\n            return this._config.scores.noAlt;\n        }\n        return null;\n    }\n    /**\n     * Translates the score to a message the user can understand.\n     *\n     * @param {number} imageCount The amount of images to be checked against.\n     * @param {object} altProperties An object containing the various alt-tags.\n     * @param {object} i18n The object used for translations.\n     *\n     * @returns {string} The translated string.\n     */\n    translateScore(imageCount, altProperties, i18n) {\n        if (imageCount === 0) {\n            return i18n.dgettext(\"js-text-analysis\", \"No images appear in this page, consider adding some as appropriate.\");\n        }\n        // Has alt-tag and keywords\n        if (altProperties.withAltKeyword > 0) {\n            return i18n.dgettext(\"js-text-analysis\", \"The images on this page contain alt attributes with the focus keyword.\");\n        }\n        // Has alt-tag, but no keywords and it's not okay\n        if (altProperties.withAltNonKeyword > 0) {\n            return i18n.dgettext(\"js-text-analysis\", \"The images on this page do not have alt attributes containing the focus keyword.\");\n        }\n        // Has alt-tag, but no keyword is set\n        if (altProperties.withAlt > 0) {\n            return i18n.dgettext(\"js-text-analysis\", \"The images on this page contain alt attributes.\");\n        }\n        // Has no alt-tag\n        if (altProperties.noAlt > 0) {\n            return i18n.dgettext(\"js-text-analysis\", \"The images on this page are missing alt attributes.\");\n        }\n        return \"\";\n    }\n}\nmodule.exports = TextImagesAssessment;\n//# sourceMappingURL=textImagesAssessment.js.map"]}