{"version":3,"sources":["../../../../js/assessments/seo/textLengthAssessment.js"],"names":["AssessmentResult","require","Assessment","inRange","merge","TextLengthAssessment","config","defaultConfig","recommendedMinimum","slightlyBelowMinimum","belowMinimum","veryFarBelowMinimum","scores","farBelowMinimum","identifier","_config","paper","researcher","i18n","wordCount","getResearch","assessmentResult","setScore","calculateScore","setText","sprintf","translateScore","getScore","score","dngettext","module","exports"],"mappings":"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","file":"textLengthAssessment.js","sourcesContent":["\"use strict\";\nlet AssessmentResult = require(\"../../values/AssessmentResult.js\");\nlet Assessment = require(\"../../assessment.js\");\nlet inRange = require(\"lodash/inRange\");\nlet merge = require(\"lodash/merge\");\n/**\n * Assessment that will test if the text is long enough.\n */\nclass TextLengthAssessment extends Assessment {\n    /**\n     * Sets the identifier and the config.\n     *\n     * @param {object} config The configuration to use.\n     *\n     * @returns {void}\n     */\n    constructor(config = {}) {\n        super();\n        let defaultConfig = {\n            recommendedMinimum: 300,\n            slightlyBelowMinimum: 250,\n            belowMinimum: 200,\n            veryFarBelowMinimum: 100,\n            scores: {\n                recommendedMinimum: 9,\n                slightlyBelowMinimum: 6,\n                belowMinimum: 3,\n                farBelowMinimum: -10,\n                veryFarBelowMinimum: -20,\n            },\n        };\n        this.identifier = \"textLength\";\n        this._config = merge(defaultConfig, config);\n    }\n    /**\n     * Execute the Assessment and return a result.\n     *\n     * @param {Paper} paper The Paper object to assess.\n     * @param {Researcher} researcher The Researcher object containing all available researches.\n     * @param {object} i18n The locale object.\n     *\n     * @returns {AssessmentResult} The result of the assessment, containing both a score and a descriptive text.\n     */\n    getResult(paper, researcher, i18n) {\n        let wordCount = researcher.getResearch(\"wordCountInText\");\n        let assessmentResult = new AssessmentResult();\n        assessmentResult.setScore(this.calculateScore(wordCount));\n        assessmentResult.setText(i18n.sprintf(this.translateScore(assessmentResult.getScore(), wordCount, i18n), wordCount, this._config.recommendedMinimum));\n        return assessmentResult;\n    }\n    /**\n     * Calculates the score based on the current word count.\n     *\n     * @param {number} wordCount The amount of words to be checked against.\n\n     * @returns {number|null} The score.\n     */\n    calculateScore(wordCount) {\n        if (wordCount >= this._config.recommendedMinimum) {\n            return this._config.scores.recommendedMinimum;\n        }\n        if (inRange(wordCount, this._config.slightlyBelowMinimum, this._config.recommendedMinimum)) {\n            return this._config.scores.slightlyBelowMinimum;\n        }\n        if (inRange(wordCount, this._config.belowMinimum, this._config.slightlyBelowMinimum)) {\n            return this._config.scores.belowMinimum;\n        }\n        if (inRange(wordCount, this._config.veryFarBelowMinimum, this._config.belowMinimum)) {\n            return this._config.scores.farBelowMinimum;\n        }\n        if (inRange(wordCount, 0, this._config.veryFarBelowMinimum)) {\n            return this._config.scores.veryFarBelowMinimum;\n        }\n        return null;\n    }\n    /**\n     * Translates the score to a message the user can understand.\n     *\n     * @param {number} score The amount of words to be checked against.\n     * @param {number} wordCount The amount of words.\n     * @param {object} i18n The object used for translations.\n     *\n     * @returns {string} The translated string.\n     */\n    translateScore(score, wordCount, i18n) {\n        if (score === this._config.scores.recommendedMinimum) {\n            return i18n.dngettext(\"js-text-analysis\", \n            /* Translators: %1$d expands to the number of words in the text */\n            \"The text contains %1$d word.\", \"The text contains %1$d words.\", wordCount) + \" \" + i18n.dngettext(\"js-text-analysis\", \n            /* Translators: The preceding sentence is \"The text contains x words.\", %2$s expands to the recommended minimum of words. */\n            \"This is more than or equal to the recommended minimum of %2$d word.\", \"This is more than or equal to the recommended minimum of %2$d words.\", this._config.recommendedMinimum);\n        }\n        if (score === this._config.scores.slightlyBelowMinimum) {\n            return i18n.dngettext(\"js-text-analysis\", \n            /* Translators: %1$d expands to the number of words in the text */\n            \"The text contains %1$d word.\", \"The text contains %1$d words.\", wordCount) + \" \" + i18n.dngettext(\"js-text-analysis\", \n            /* Translators: The preceding sentence is \"The text contains x words.\", %2$s expands to the recommended minimum of words */\n            \"This is slightly below the recommended minimum of %2$d word. Add a bit more copy.\", \"This is slightly below the recommended minimum of %2$d words. Add a bit more copy.\", this._config.recommendedMinimum);\n        }\n        if (score === this._config.scores.belowMinimum) {\n            return i18n.dngettext(\"js-text-analysis\", \n            /* Translators: %1$d expands to the number of words in the text */\n            \"The text contains %1$d word.\", \"The text contains %1$d words.\", wordCount) + \" \" + i18n.dngettext(\"js-text-analysis\", \n            /* Translators: The preceding sentence is \"The text contains x words.\", %2$s expands to the recommended minimum of words */\n            \"This is below the recommended minimum of %2$d word. Add more content that is relevant for the topic.\", \"This is below the recommended minimum of %2$d words. Add more content that is relevant for the topic.\", this._config.recommendedMinimum);\n        }\n        if (score === this._config.scores.farBelowMinimum || score === this._config.scores.veryFarBelowMinimum) {\n            return i18n.dngettext(\"js-text-analysis\", \n            /* Translators: %1$d expands to the number of words in the text */\n            \"The text contains %1$d word.\", \"The text contains %1$d words.\", wordCount) + \" \" + i18n.dngettext(\"js-text-analysis\", \n            /* Translators: The preceding sentence is \"The text contains x words.\", %2$s expands to the recommended minimum of words */\n            \"This is far below the recommended minimum of %2$d word. Add more content that is relevant for the topic.\", \"This is far below the recommended minimum of %2$d words. Add more content that is relevant for the topic.\", this._config.recommendedMinimum);\n        }\n        return \"\";\n    }\n}\nmodule.exports = TextLengthAssessment;\n//# sourceMappingURL=textLengthAssessment.js.map"]}