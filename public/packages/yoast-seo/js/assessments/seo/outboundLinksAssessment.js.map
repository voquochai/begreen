{"version":3,"sources":["../../../../js/assessments/seo/outboundLinksAssessment.js"],"names":["AssessmentResult","require","Assessment","isEmpty","merge","OutboundLinksAssessment","config","defaultConfig","scores","noLinks","allNofollowed","moreNoFollowed","allFollowed","identifier","_config","paper","researcher","i18n","linkStatistics","getResearch","assessmentResult","setScore","calculateScore","setText","translateScore","hasText","externalTotal","externalNofollow","total","externalDofollow","dgettext","sprintf","module","exports"],"mappings":"AAAA;;;;;;;;;;AACA,IAAIA,mBAAmBC,QAAQ,kCAAR,CAAvB;AACA,IAAIC,aAAaD,QAAQ,qBAAR,CAAjB;AACA,IAAIE,UAAUF,QAAQ,gBAAR,CAAd;AACA,IAAIG,QAAQH,QAAQ,cAAR,CAAZ;AACA;;;;IAGMI,uB;;;AACF;;;;;;;AAOA,uCAAyB;AAAA,YAAbC,MAAa,uEAAJ,EAAI;;AAAA;;AAAA;;AAErB,YAAIC,gBAAgB;AAChBC,oBAAQ;AACJC,yBAAS,CADL;AAEJC,+BAAe,CAFX;AAGJC,gCAAgB,CAHZ;AAIJC,6BAAa;AAJT;AADQ,SAApB;AAQA,cAAKC,UAAL,GAAkB,eAAlB;AACA,cAAKC,OAAL,GAAeV,MAAMG,aAAN,EAAqBD,MAArB,CAAf;AAXqB;AAYxB;AACD;;;;;;;;;;;;;kCASUS,K,EAAOC,U,EAAYC,I,EAAM;AAC/B,gBAAIC,iBAAiBF,WAAWG,WAAX,CAAuB,mBAAvB,CAArB;AACA,gBAAIC,mBAAmB,IAAIpB,gBAAJ,EAAvB;AACA,gBAAI,CAACG,QAAQe,cAAR,CAAL,EAA8B;AAC1BE,iCAAiBC,QAAjB,CAA0B,KAAKC,cAAL,CAAoBJ,cAApB,CAA1B;AACAE,iCAAiBG,OAAjB,CAAyB,KAAKC,cAAL,CAAoBN,cAApB,EAAoCD,IAApC,CAAzB;AACH;AACD,mBAAOG,gBAAP;AACH;AACD;;;;;;;;;;qCAOaL,K,EAAO;AAChB,mBAAOA,MAAMU,OAAN,EAAP;AACH;AACD;;;;;;;;;;uCAOeP,c,EAAgB;AAC3B,gBAAIA,eAAeQ,aAAf,KAAiC,CAArC,EAAwC;AACpC,uBAAO,KAAKZ,OAAL,CAAaN,MAAb,CAAoBC,OAA3B;AACH;AACD,gBAAIS,eAAeS,gBAAf,KAAoCT,eAAeU,KAAvD,EAA8D;AAC1D,uBAAO,KAAKd,OAAL,CAAaN,MAAb,CAAoBE,aAA3B;AACH;AACD,gBAAIQ,eAAeS,gBAAf,GAAkCT,eAAeQ,aAArD,EAAoE;AAChE,uBAAO,KAAKZ,OAAL,CAAaN,MAAb,CAAoBG,cAA3B;AACH;AACD,gBAAIO,eAAeW,gBAAf,KAAoCX,eAAeU,KAAvD,EAA8D;AAC1D,uBAAO,KAAKd,OAAL,CAAaN,MAAb,CAAoBI,WAA3B;AACH;AACD,mBAAO,IAAP;AACH;AACD;;;;;;;;;;;uCAQeM,c,EAAgBD,I,EAAM;AACjC,gBAAIC,eAAeQ,aAAf,KAAiC,CAArC,EAAwC;AACpC,uBAAOT,KAAKa,QAAL,CAAc,kBAAd,EAAkC,6EAAlC,CAAP;AACH;AACD,gBAAIZ,eAAeS,gBAAf,KAAoCT,eAAeU,KAAvD,EAA8D;AAC1D;AACA,uBAAOX,KAAKc,OAAL,CAAad,KAAKa,QAAL,CAAc,kBAAd,EAAkC,sDAAlC,CAAb,EAAwGZ,eAAeS,gBAAvH,CAAP;AACH;AACD,gBAAIT,eAAeS,gBAAf,GAAkCT,eAAeQ,aAArD,EAAoE;AAChE;AACA,uBAAOT,KAAKc,OAAL,CAAad,KAAKa,QAAL,CAAc,kBAAd,EAAkC,kFAAlC,CAAb,EAAoIZ,eAAeS,gBAAnJ,EAAqKT,eAAeW,gBAApL,CAAP;AACH;AACD,gBAAIX,eAAeW,gBAAf,KAAoCX,eAAeU,KAAvD,EAA8D;AAC1D;AACA,uBAAOX,KAAKc,OAAL,CAAad,KAAKa,QAAL,CAAc,kBAAd,EAAkC,sCAAlC,CAAb,EAAwFZ,eAAeQ,aAAvG,CAAP;AACH;AACD,mBAAO,EAAP;AACH;;;;EAhGiCxB,U;;AAkGtC8B,OAAOC,OAAP,GAAiB5B,uBAAjB;AACA","file":"outboundLinksAssessment.js","sourcesContent":["\"use strict\";\nlet AssessmentResult = require(\"../../values/AssessmentResult.js\");\nlet Assessment = require(\"../../assessment.js\");\nlet isEmpty = require(\"lodash/isEmpty\");\nlet merge = require(\"lodash/merge\");\n/**\n * Assessment for calculating the outbound links in the text.\n */\nclass OutboundLinksAssessment extends Assessment {\n    /**\n     * Sets the identifier and the config.\n     *\n     * @param {object} config The configuration to use.\n     *\n     * @returns {void}\n     */\n    constructor(config = {}) {\n        super();\n        let defaultConfig = {\n            scores: {\n                noLinks: 6,\n                allNofollowed: 7,\n                moreNoFollowed: 8,\n                allFollowed: 9,\n            },\n        };\n        this.identifier = \"externalLinks\";\n        this._config = merge(defaultConfig, config);\n    }\n    /**\n     * Runs the getLinkStatistics module, based on this returns an assessment result with score.\n     *\n     * @param {Paper} paper The paper to use for the assessment.\n     * @param {Researcher} researcher The researcher used for calling research.\n     * @param {object} i18n The object used for translations\n     *\n     * @returns {AssessmentResult} The assessment result.\n     */\n    getResult(paper, researcher, i18n) {\n        let linkStatistics = researcher.getResearch(\"getLinkStatistics\");\n        let assessmentResult = new AssessmentResult();\n        if (!isEmpty(linkStatistics)) {\n            assessmentResult.setScore(this.calculateScore(linkStatistics));\n            assessmentResult.setText(this.translateScore(linkStatistics, i18n));\n        }\n        return assessmentResult;\n    }\n    /**\n     * Checks whether paper has text.\n     *\n     * @param {Paper} paper The paper to use for the assessment.\n     *\n     * @returns {boolean} True when there is text.\n     */\n    isApplicable(paper) {\n        return paper.hasText();\n    }\n    /**\n     * Returns a score based on the linkStatistics object.\n     *\n     * @param {object} linkStatistics The object with all link statistics.\n     *\n     * @returns {number|null} The calculated score.\n     */\n    calculateScore(linkStatistics) {\n        if (linkStatistics.externalTotal === 0) {\n            return this._config.scores.noLinks;\n        }\n        if (linkStatistics.externalNofollow === linkStatistics.total) {\n            return this._config.scores.allNofollowed;\n        }\n        if (linkStatistics.externalNofollow < linkStatistics.externalTotal) {\n            return this._config.scores.moreNoFollowed;\n        }\n        if (linkStatistics.externalDofollow === linkStatistics.total) {\n            return this._config.scores.allFollowed;\n        }\n        return null;\n    }\n    /**\n     * Translates the score to a message the user can understand.\n     *\n     * @param {object} linkStatistics The object with all link statistics.\n     * @param {object} i18n The object used for translations.\n     *\n     * @returns {string} The translated string.\n     */\n    translateScore(linkStatistics, i18n) {\n        if (linkStatistics.externalTotal === 0) {\n            return i18n.dgettext(\"js-text-analysis\", \"No outbound links appear in this page, consider adding some as appropriate.\");\n        }\n        if (linkStatistics.externalNofollow === linkStatistics.total) {\n            /* Translators: %1$s expands the number of outbound links */\n            return i18n.sprintf(i18n.dgettext(\"js-text-analysis\", \"This page has %1$s outbound link(s), all nofollowed.\"), linkStatistics.externalNofollow);\n        }\n        if (linkStatistics.externalNofollow < linkStatistics.externalTotal) {\n            /* Translators: %1$s expands to the number of nofollow links, %2$s to the number of outbound links */\n            return i18n.sprintf(i18n.dgettext(\"js-text-analysis\", \"This page has %1$s nofollowed outbound link(s) and %2$s normal outbound link(s).\"), linkStatistics.externalNofollow, linkStatistics.externalDofollow);\n        }\n        if (linkStatistics.externalDofollow === linkStatistics.total) {\n            /* Translators: %1$s expands to the number of outbound links */\n            return i18n.sprintf(i18n.dgettext(\"js-text-analysis\", \"This page has %1$s outbound link(s).\"), linkStatistics.externalTotal);\n        }\n        return \"\";\n    }\n}\nmodule.exports = OutboundLinksAssessment;\n//# sourceMappingURL=outboundLinksAssessment.js.map"]}