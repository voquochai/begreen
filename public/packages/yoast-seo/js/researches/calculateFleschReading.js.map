{"version":3,"sources":["../../../js/researches/calculateFleschReading.js"],"names":["stripNumbers","require","countSentences","countWords","countSyllables","formatNumber","getLanguage","getAverage","total","amount","module","exports","paper","score","text","getText","locale","getLocale","language","numberOfSentences","numberOfWords","numberOfSyllables","averageWordsPerSentence","syllablesPer100Words"],"mappings":"AAAA;AACA;;AACA,IAAIA,eAAeC,QAAQ,qCAAR,CAAnB;AACA,IAAIC,iBAAiBD,QAAQ,uCAAR,CAArB;AACA,IAAIE,aAAaF,QAAQ,mCAAR,CAAjB;AACA,IAAIG,iBAAiBH,QAAQ,wCAAR,CAArB;AACA,IAAII,eAAeJ,QAAQ,4BAAR,CAAnB;AACA,IAAIK,cAAcL,QAAQ,2BAAR,CAAlB;AACA;;;;;;;AAOA,IAAIM,aAAa,SAAbA,UAAa,CAAUC,KAAV,EAAiBC,MAAjB,EAAyB;AACtC,WAAOD,QAAQC,MAAf;AACH,CAFD;AAGA;;;;;;AAMAC,OAAOC,OAAP,GAAiB,UAAUC,KAAV,EAAiB;AAC9B,QAAIC,cAAJ;AACA,QAAIC,OAAOF,MAAMG,OAAN,EAAX;AACA,QAAIC,SAASJ,MAAMK,SAAN,EAAb;AACA,QAAIC,WAAWZ,YAAYU,MAAZ,CAAf;AACA,QAAIF,SAAS,EAAb,EAAiB;AACb,eAAO,CAAP;AACH;AACDA,WAAOd,aAAac,IAAb,CAAP;AACA,QAAIK,oBAAoBjB,eAAeY,IAAf,CAAxB;AACA,QAAIM,gBAAgBjB,WAAWW,IAAX,CAApB;AACA;AACA,QAAIK,sBAAsB,CAAtB,IAA2BC,kBAAkB,CAAjD,EAAoD;AAChD,eAAO,CAAP;AACH;AACD,QAAIC,oBAAoBjB,eAAeU,IAAf,EAAqBE,MAArB,CAAxB;AACA,QAAIM,0BAA0Bf,WAAWa,aAAX,EAA0BD,iBAA1B,CAA9B;AACA,QAAII,uBAAuBF,qBAAqB,MAAMD,aAA3B,CAA3B;AACA,YAAQF,QAAR;AACI,aAAK,IAAL;AACIL,oBAAQ,SAAU,OAAOU,oBAAjB,GAA0C,OAAQD,uBAA1D;AACA;AACJ,aAAK,IAAL;AACIT,oBAAQ,MAAMS,uBAAN,GAAiC,OAAOD,iBAAP,GAA2BD,aAApE;AACA;AACJ,aAAK,IAAL;AACIP,oBAAQ,MAAO,MAAMS,uBAAb,GAAyC,MAAMC,oBAAvD;AACA;AACJ,aAAK,IAAL;AACA;AACIV,oBAAQ,UAAW,QAASS,uBAApB,GAAiD,QAAQD,oBAAoBD,aAA5B,CAAzD;AACA;AAbR;AAeA,WAAOf,aAAaQ,KAAb,CAAP;AACH,CAlCD;AAmCA","file":"calculateFleschReading.js","sourcesContent":["\"use strict\";\n/** @module analyses/calculateFleschReading */\nlet stripNumbers = require(\"../stringProcessing/stripNumbers.js\");\nlet countSentences = require(\"../stringProcessing/countSentences.js\");\nlet countWords = require(\"../stringProcessing/countWords.js\");\nlet countSyllables = require(\"../stringProcessing/syllables/count.js\");\nlet formatNumber = require(\"../helpers/formatNumber.js\");\nlet getLanguage = require(\"../helpers/getLanguage.js\");\n/**\n * Calculates an average from a total and an amount\n *\n * @param {number} total The total.\n * @param {number} amount The amount.\n * @returns {number} The average from the total and the amount.\n */\nlet getAverage = function (total, amount) {\n    return total / amount;\n};\n/**\n * This calculates the flesch reading score for a given text.\n *\n * @param {object} paper The paper containing the text\n * @returns {number} The score of the flesch reading test\n */\nmodule.exports = function (paper) {\n    let score;\n    let text = paper.getText();\n    let locale = paper.getLocale();\n    let language = getLanguage(locale);\n    if (text === \"\") {\n        return 0;\n    }\n    text = stripNumbers(text);\n    let numberOfSentences = countSentences(text);\n    let numberOfWords = countWords(text);\n    // Prevent division by zero errors.\n    if (numberOfSentences === 0 || numberOfWords === 0) {\n        return 0;\n    }\n    let numberOfSyllables = countSyllables(text, locale);\n    let averageWordsPerSentence = getAverage(numberOfWords, numberOfSentences);\n    let syllablesPer100Words = numberOfSyllables * (100 / numberOfWords);\n    switch (language) {\n        case \"nl\":\n            score = 206.84 - (0.77 * syllablesPer100Words) - (0.93 * (averageWordsPerSentence));\n            break;\n        case \"de\":\n            score = 180 - averageWordsPerSentence - (58.5 * numberOfSyllables / numberOfWords);\n            break;\n        case \"it\":\n            score = 217 - (1.3 * averageWordsPerSentence) - (0.6 * syllablesPer100Words);\n            break;\n        case \"en\":\n        default:\n            score = 206.835 - (1.015 * (averageWordsPerSentence)) - (84.6 * (numberOfSyllables / numberOfWords));\n            break;\n    }\n    return formatNumber(score);\n};\n//# sourceMappingURL=calculateFleschReading.js.map"]}